(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{1009:function(e,a,t){"use strict";var n=t(2),c=t(5),r=t(0),l=t.n(r),o=(t(1),t(3)),s=t(9),i=l.a.forwardRef(function(e,a){var t=e.classes,r=e.className,s=e.dividers,i=void 0!==s&&s,m=Object(c.a)(e,["classes","className","dividers"]);return l.a.createElement("div",Object(n.a)({className:Object(o.a)(t.root,r,i&&t.dividers),ref:a},m))});a.a=Object(s.a)(function(e){return{root:{flex:"1 1 auto",padding:"8px 24px",WebkitOverflowScrolling:"touch",overflowY:"auto"},dividers:{borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}},{name:"MuiDialogContent"})(i)},1021:function(e,a,t){"use strict";var n=t(2),c=t(5),r=t(0),l=t.n(r),o=(t(1),t(3)),s=t(9),i=l.a.forwardRef(function(e,a){var t=e.disableSpacing,r=void 0!==t&&t,s=e.classes,i=e.className,m=Object(c.a)(e,["disableSpacing","classes","className"]);return l.a.createElement("div",Object(n.a)({className:Object(o.a)(s.root,i,!r&&s.spacing),ref:a},m))});a.a=Object(s.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > * + *":{marginLeft:8}}},{name:"MuiDialogActions"})(i)},2275:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(918),l=t(889),o=t(20),s=t(7),i=t(174),m=t(16),u=t(131),d=t(901),p=t(746),f=t(465),E=t(318),b=t(41),h=t.n(b),v="[CONTACTS APP] GET USER DATA";function N(){var e=h.a.get("/api/contacts-app/user");return function(a){return e.then(function(e){return a({type:v,payload:e.data})})}}var C="[CONTACTS APP] GET CONTACTS",y="[CONTACTS APP] SET SEARCH TEXT",T="[CONTACTS APP] TOGGLE IN SELECTED CONTACTS",O="[CONTACTS APP] SELECT ALL CONTACTS",g="[CONTACTS APP] DESELECT ALL CONTACTS",A="[CONTACTS APP] OPEN NEW CONTACT DIALOG",j="[CONTACTS APP] CLOSE NEW CONTACT DIALOG",x="[CONTACTS APP] OPEN EDIT CONTACT DIALOG",P="[CONTACTS APP] CLOSE EDIT CONTACT DIALOG",w="[CONTACTS APP] ADD CONTACT",S="[CONTACTS APP] UPDATE CONTACT",k="[CONTACTS APP] REMOVE CONTACT",I="[CONTACTS APP] REMOVE CONTACTS",D="[CONTACTS APP] TOGGLE STARRED CONTACT",L="[CONTACTS APP] SET CONTACTS STARRED ";function W(e){var a=h.a.get("/api/contacts-app/contacts",{params:e});return function(t){return a.then(function(a){return t({type:C,payload:a.data,routeParams:e})})}}function R(e){return function(a,t){var n=t().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/remove-contact",{contactId:e}).then(function(e){return Promise.all([a({type:k})]).then(function(){return a(W(n))})})}}var G=t(314),H=t(847),B=t(890),U=t(916),F=t(893);var M=function(e){var a=Object(s.c)(),t=Object(s.d)(function(e){return e.contactsApp.contacts.selectedContactIds}),r=Object(n.useState)(null),o=Object(m.a)(r,2),i=o[0],u=o[1];function d(){u(null)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{className:"p-0","aria-owns":i?"selectedContactsMenu":null,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)}},c.a.createElement(l.a,null,"more_horiz")),c.a.createElement(G.a,{id:"selectedContactsMenu",anchorEl:i,open:Boolean(i),onClose:d},c.a.createElement(H.a,null,c.a.createElement(B.a,{onClick:function(){var e;a((e=t,function(a,t){var n=t().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/remove-contacts",{contactIds:e}).then(function(e){return Promise.all([a({type:I}),a({type:g})]).then(function(){return a(W(n))})})})),d()}},c.a.createElement(U.a,{className:"min-w-40"},c.a.createElement(l.a,null,"delete")),c.a.createElement(F.a,{primary:"Remove"})),c.a.createElement(B.a,{onClick:function(){var e;a((e=t,function(a,t){var n=t().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/set-contacts-starred",{contactIds:e}).then(function(e){return Promise.all([a({type:L}),a({type:g}),a(N())]).then(function(){return a(W(n))})})})),d()}},c.a.createElement(U.a,{className:"min-w-40"},c.a.createElement(l.a,null,"star")),c.a.createElement(F.a,{primary:"Starred"})),c.a.createElement(B.a,{onClick:function(){var e;a((e=t,function(a,t){var n=t().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/set-contacts-unstarred",{contactIds:e}).then(function(e){return Promise.all([a({type:L}),a({type:g}),a(N())]).then(function(){return a(W(n))})})})),d()}},c.a.createElement(U.a,{className:"min-w-40"},c.a.createElement(l.a,null,"star_border")),c.a.createElement(F.a,{primary:"Unstarred"})))))};var _=function(e){var a=Object(s.c)(),t=Object(s.d)(function(e){return e.contactsApp.contacts.entities}),r=Object(s.d)(function(e){return e.contactsApp.contacts.selectedContactIds}),i=Object(s.d)(function(e){return e.contactsApp.contacts.searchText}),b=Object(s.d)(function(e){return e.contactsApp.user}),v=Object(n.useState)(null),C=Object(m.a)(v,2),y=C[0],A=C[1];return Object(n.useEffect)(function(){t&&A(function(e,a){var t=Object.keys(e).map(function(a){return e[a]});return 0===a.length?t:o.B.filterArrayByString(t,a)}(t,i))},[t,i]),y?0===y.length?c.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},c.a.createElement(u.a,{color:"textSecondary",variant:"h5"},"There are no contacts!")):c.a.createElement(o.d,{animation:"transition.slideUpIn",delay:300},c.a.createElement(E.b,{className:"-striped -highlight h-full sm:rounded-16 overflow-hidden",getTrProps:function(e,t,n){return{className:"cursor-pointer",onClick:function(e,n){var c;t&&a((c=t.original,{type:x,data:c}))}}},data:y,columns:[{Header:function(){return c.a.createElement(d.a,{onClick:function(e){e.stopPropagation()},onChange:function(e){e.target.checked?a({type:O}):a({type:g})},checked:r.length===Object.keys(t).length&&r.length>0,indeterminate:r.length!==Object.keys(t).length&&r.length>0})},accessor:"",Cell:function(e){return c.a.createElement(d.a,{onClick:function(e){e.stopPropagation()},checked:r.includes(e.value.id),onChange:function(){return a((t=e.value.id,{type:T,contactId:t}));var t}})},className:"justify-center",sortable:!1,width:64},{Header:function(){return r.length>0&&c.a.createElement(M,null)},accessor:"avatar",Cell:function(e){return c.a.createElement(p.a,{className:"mr-8",alt:e.original.name,src:e.value})},className:"justify-center",width:64,sortable:!1},{Header:"First Name",accessor:"name",filterable:!0,className:"font-bold"},{Header:"Last Name",accessor:"lastName",filterable:!0,className:"font-bold"},{Header:"Company",accessor:"company",filterable:!0},{Header:"Job Title",accessor:"jobTitle",filterable:!0},{Header:"Email",accessor:"email",filterable:!0},{Header:"Phone",accessor:"phone",filterable:!0},{Header:"",width:128,Cell:function(e){return c.a.createElement("div",{className:"flex items-center"},c.a.createElement(f.a,{onClick:function(t){var n;t.stopPropagation(),a((n=e.original.id,function(e,a){var t=a().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/toggle-starred-contact",{contactId:n}).then(function(a){return Promise.all([e({type:D}),e(N())]).then(function(){return e(W(t))})})}))}},b.starred&&b.starred.includes(e.original.id)?c.a.createElement(l.a,null,"star"):c.a.createElement(l.a,null,"star_border")),c.a.createElement(f.a,{onClick:function(t){t.stopPropagation(),a(R(e.original.id))}},c.a.createElement(l.a,null,"delete")))}}],defaultPageSize:10,noDataText:"No contacts found"})):null},J=t(902),q=t(153),z=t(320),V=t(891);var X=function(e){var a=Object(s.c)(),t=Object(s.d)(function(e){return e.contactsApp.contacts.searchText}),n=Object(s.d)(function(e){return e.fuse.settings.mainTheme});return c.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24"},c.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},c.a.createElement(J.a,{lgUp:!0},c.a.createElement(f.a,{onClick:function(a){e.pageLayout.current.toggleLeftSidebar()},"aria-label":"open left sidebar"},c.a.createElement(l.a,null,"menu"))),c.a.createElement("div",{className:"flex items-center"},c.a.createElement(o.d,{animation:"transition.expandIn",delay:300},c.a.createElement(l.a,{className:"text-32 mr-12"},"account_box")),c.a.createElement(o.d,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(u.a,{variant:"h6",className:"hidden sm:flex"},"Contacts")))),c.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},c.a.createElement(V.a,{theme:n},c.a.createElement(o.d,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(q.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},c.a.createElement(l.a,{className:"mr-8",color:"action"},"search"),c.a.createElement(z.a,{placeholder:"Search for anything",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:function(e){return a({type:y,searchText:e.target.value})}}))))))},Y=t(910),K=t(848),Q=t(849),Z=t(470),$=Object(Z.a)(function(e){return{listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:24,paddingRight:12,"&.active":{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText+"!important",pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{marginRight:16}}}});var ee=function(e){var a=Object(s.d)(function(e){return e.contactsApp.user}),t=$(e);return c.a.createElement("div",{className:"p-0 lg:p-24 lg:pr-4"},c.a.createElement(o.d,{animation:"transition.slideLeftIn",delay:200},c.a.createElement(q.a,{className:"rounded-0 shadow-none lg:rounded-8 lg:shadow-1"},c.a.createElement("div",{className:"p-24 flex items-center"},c.a.createElement(p.a,{className:"mr-12",alt:a.name,src:a.avatar}),c.a.createElement(u.a,null,a.name)),c.a.createElement(Y.a,null),c.a.createElement(K.a,null,c.a.createElement(Q.a,{button:!0,component:o.C,to:"/apps/contacts/all",activeClassName:"active",className:t.listItem},c.a.createElement(l.a,{className:"list-item-icon text-16",color:"action"},"people"),c.a.createElement(F.a,{className:"truncate pr-0",primary:"All contacts",disableTypography:!0})),c.a.createElement(Q.a,{button:!0,component:o.C,to:"/apps/contacts/frequent",activeClassName:"active",className:t.listItem},c.a.createElement(l.a,{className:"list-item-icon text-16",color:"action"},"restore"),c.a.createElement(F.a,{className:"truncate pr-0",primary:"Frequently contacted",disableTypography:!0})),c.a.createElement(Q.a,{button:!0,component:o.C,to:"/apps/contacts/starred",activeClassName:"active",className:t.listItem},c.a.createElement(l.a,{className:"list-item-icon text-16",color:"action"},"star"),c.a.createElement(F.a,{className:"truncate pr-0",primary:"Starred contacts",disableTypography:!0}))))))},ae=t(10),te=t(917),ne=t(914),ce=t(900),re=t(1009),le=t(896),oe=t(1021),se=t(899),ie=t(134),me=t(177),ue={id:"",name:"",lastName:"",avatar:"assets/images/avatars/profile.jpg",nickname:"",company:"",jobTitle:"",email:"",phone:"",address:"",birthday:"",notes:""};var de=function(e){var a=Object(s.c)(),t=Object(s.d)(function(e){return e.contactsApp.contacts.contactDialog}),r=Object(ie.b)(ue),o=r.form,i=r.handleChange,m=r.setForm,d=Object(n.useCallback)(function(){"edit"===t.type&&t.data&&m(Object(ae.a)({},t.data)),"new"===t.type&&m(Object(ae.a)({},ue,t.data,{id:me.a.generateGUID()}))},[t.data,t.type,m]);function E(){"edit"===t.type?a({type:P}):a({type:j})}function b(){return o.name.length>0}function v(e){var n,c;e.preventDefault(),"new"===t.type?a((c=o,function(e,a){var t=a().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/add-contact",{newContact:c}).then(function(a){return Promise.all([e({type:w})]).then(function(){return e(W(t))})})})):a((n=o,function(e,a){var t=a().contactsApp.contacts.routeParams;return h.a.post("/api/contacts-app/update-contact",{contact:n}).then(function(a){return Promise.all([e({type:S})]).then(function(){return e(W(t))})})})),E()}return Object(n.useEffect)(function(){t.props.open&&d()},[t.props.open,d]),c.a.createElement(te.a,Object.assign({classes:{paper:"m-24"}},t.props,{onClose:E,fullWidth:!0,maxWidth:"xs"}),c.a.createElement(ne.a,{position:"static",elevation:1},c.a.createElement(ce.a,{className:"flex w-full"},c.a.createElement(u.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"New Contact":"Edit Contact")),c.a.createElement("div",{className:"flex flex-col items-center justify-center pb-24"},c.a.createElement(p.a,{className:"w-96 h-96",alt:"contact avatar",src:o.avatar}),"edit"===t.type&&c.a.createElement(u.a,{variant:"h6",color:"inherit",className:"pt-8"},o.name))),c.a.createElement("form",{noValidate:!0,onSubmit:v,className:"flex flex-col overflow-hidden"},c.a.createElement(re.a,{classes:{root:"p-24"}},c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"account_circle")),c.a.createElement(le.a,{className:"mb-24",label:"Name",autoFocus:!0,id:"name",name:"name",value:o.name,onChange:i,variant:"outlined",required:!0,fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"}),c.a.createElement(le.a,{className:"mb-24",label:"Last name",id:"lastName",name:"lastName",value:o.lastName,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"star")),c.a.createElement(le.a,{className:"mb-24",label:"Nickname",id:"nickname",name:"nickname",value:o.nickname,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"phone")),c.a.createElement(le.a,{className:"mb-24",label:"Phone",id:"phone",name:"phone",value:o.phone,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"email")),c.a.createElement(le.a,{className:"mb-24",label:"Email",id:"email",name:"email",value:o.email,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"domain")),c.a.createElement(le.a,{className:"mb-24",label:"Company",id:"company",name:"company",value:o.company,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"work")),c.a.createElement(le.a,{className:"mb-24",label:"Job title",id:"jobTitle",name:"jobTitle",value:o.jobTitle,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"cake")),c.a.createElement(le.a,{className:"mb-24",id:"birthday",label:"Birthday",type:"date",value:o.birthday,onChange:i,InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"home")),c.a.createElement(le.a,{className:"mb-24",label:"Address",id:"address",name:"address",value:o.address,onChange:i,variant:"outlined",fullWidth:!0})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"min-w-48 pt-20"},c.a.createElement(l.a,{color:"action"},"note")),c.a.createElement(le.a,{className:"mb-24",label:"Notes",id:"notes",name:"notes",value:o.notes,onChange:i,variant:"outlined",multiline:!0,rows:5,fullWidth:!0}))),"new"===t.type?c.a.createElement(oe.a,{className:"justify-between pl-16"},c.a.createElement(se.a,{variant:"contained",color:"primary",onClick:v,type:"submit",disabled:!b()},"Add")):c.a.createElement(oe.a,{className:"justify-between pl-16"},c.a.createElement(se.a,{variant:"contained",color:"primary",type:"submit",onClick:v,disabled:!b()},"Save"),c.a.createElement(f.a,{onClick:function(){a(R(o.id)),E()}},c.a.createElement(l.a,null,"delete")))))},pe=t(46),fe=t(11),Ee=t(8),be={entities:null,searchText:"",selectedContactIds:[],routeParams:{},contactDialog:{type:"new",props:{open:!1},data:null}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:return Object(ae.a)({},e,{entities:Ee.a.keyBy(a.payload,"id"),routeParams:a.routeParams});case y:return Object(ae.a)({},e,{searchText:a.searchText});case T:var t=a.contactId,n=Object(fe.a)(e.selectedContactIds);return n=void 0!==n.find(function(e){return e===t})?n.filter(function(e){return e!==t}):[].concat(Object(fe.a)(n),[t]),Object(ae.a)({},e,{selectedContactIds:n});case O:var c=Object.keys(e.entities).map(function(a){return e.entities[a]}).map(function(e){return e.id});return Object(ae.a)({},e,{selectedContactIds:c});case g:return Object(ae.a)({},e,{selectedContactIds:[]});case A:return Object(ae.a)({},e,{contactDialog:{type:"new",props:{open:!0},data:null}});case j:return Object(ae.a)({},e,{contactDialog:{type:"new",props:{open:!1},data:null}});case x:return Object(ae.a)({},e,{contactDialog:{type:"edit",props:{open:!0},data:a.data}});case P:return Object(ae.a)({},e,{contactDialog:{type:"edit",props:{open:!1},data:null}});default:return e}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case v:return a.payload;default:return e}},Ne=Object(pe.d)({contacts:he,user:ve}),Ce=Object(Z.a)({addButton:{position:"absolute",right:12,bottom:12,zIndex:99}});a.default=Object(i.a)("contactsApp",Ne)(function(e){var a=Object(s.c)(),t=Ce(e),i=Object(n.useRef)(null);return Object(n.useEffect)(function(){a(W(e.match.params)),a(N())},[a,e.match.params]),Object(n.useEffect)(function(){a(W(e.match.params))},[a,e.match.params]),c.a.createElement(c.a.Fragment,null,c.a.createElement(o.s,{classes:{contentWrapper:"p-0 sm:p-24 pb-80 sm:pb-80 h-full",content:"flex flex-col h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:c.a.createElement(X,{pageLayout:i}),content:c.a.createElement(_,null),leftSidebarContent:c.a.createElement(ee,null),sidebarInner:!0,ref:i,innerScroll:!0}),c.a.createElement(o.d,{animation:"transition.expandIn",delay:300},c.a.createElement(r.a,{color:"primary","aria-label":"add",className:t.addButton,onClick:function(e){return a({type:A})}},c.a.createElement(l.a,null,"person_add"))),c.a.createElement(de,null))})}}]);